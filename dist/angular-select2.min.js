!function(){"use strict";function a(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}var b=angular.module("rt.select2",[]);b.value("select2Config",{}),b.directive("select2",["$rootScope","$timeout","$parse","select2Config",function(b,c,d,e){var f={},g=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return e&&angular.extend(f,e),{require:"ngModel",priority:1,restrict:"E",template:'<input type="hidden"></input>',replace:!0,link:function(b,e,h,i){function j(a){k(function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d];if(m){var f=i.$viewValue||[];f.indexOf(e.id)>-1&&c.push(e)}else if(o[i.$viewValue]===e.id)return void a(e)}a(c)})}var k,l=angular.extend({},f,b.$eval(h.options)),m=angular.isDefined(h.multiple)||l.multiple;l.multiple=m,h.placeholder&&(l.placeholder=h.placeholder);var n=d(h.ngModel),o={};if(h.ngOptions){var p;if(!(p=h.ngOptions.match(g)))throw new Error("Invalid ngOptions encountered!");var q=d(p[2]||p[1]),r=d(p[7]),s=p[4]||p[6],t=d(p[2]?p[1]:s),u=p[5];k=function(c){for(var d=r(b),e=(u?a(d):d)||[],f=[],g=0;g<e.length;g++){var h={},i=g;u&&(i=e[g],h[u]=i),h[s]=d[i];var j=t(b,h),k=q(b,h)||"";o[j]=j,f.push({id:j,text:k})}c(f)},l.query=function(c){for(var d=r(b),e=(u?a(d):d)||[],f=[],g=0;g<e.length;g++){var h={},i=g;u&&(i=e[g],h[u]=i),h[s]=d[i];var j=t(b,h),k=q(b,h)||"";k.toLowerCase().indexOf(c.term.toLowerCase())>-1&&f.push({id:j,text:k})}c.callback({results:f})},b.$watch(p[7],function(){i.$render()})}else{if(!l.query)throw new Error("You need to supply a query function!");k=function(a){l.query({term:"",callback:function(b){for(var c=0;c<b.results.length;c++){var d=b.results[c];o[d.id]=d.id}a(b.results)}})}}i.$render=function(){j(function(a){m?e.select2("data",a):e.select2("val",a.id)})},l.initSelection=function(a,b){j(b)},c(function(){e.select2(l),e.on("change",function(a){b.$apply(function(){if(m){for(var c=[],d=0;d<a.val.length;d++)c[d]=o[a.val[d]];n.assign(b,c)}else n.assign(b,o[a.val])})}),i.$render()})}}}])}();